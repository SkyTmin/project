<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#7B4B2A">
    <title>Coco Instrument - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="description" content="–ú–æ–¥—É–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="/manifest.json">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/auth.css">
    <link rel="stylesheet" href="/css/coco-money.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div id="app" class="app-container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav id="main-nav" class="nav hidden">
            <div class="nav-brand">Coco Instrument</div>
            <div class="nav-links">
                <a href="#/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#/coco-money" class="nav-link">Coco Money</a>
            </div>
            <div class="nav-user">
                <span id="user-email"></span>
                <button id="logout-btn" class="btn-logout">–í—ã–π—Ç–∏</button>
            </div>
        </nav>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–æ–¥—É–ª–µ–π -->
        <main id="module-container" class="module-container">
            <!-- –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
            <div id="auth-module" class="module">
                <div class="auth-container">
                    <h1 class="auth-title">Coco Instrument</h1>
                    
                    <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                    <form id="login-form" class="auth-form">
                        <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                        <input type="email" id="login-email" placeholder="Email" required>
                        <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <label class="remember-device">
                            <input type="checkbox" id="remember-device">
                            <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</span>
                        </label>
                        <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
                        <p class="auth-switch">
                            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                        </p>
                    </form>

                    <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                    <form id="register-form" class="auth-form hidden">
                        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <input type="date" id="register-date" placeholder="–í—á–µ—Ä–∞—à–Ω—è—è –¥–∞—Ç–∞" required>
                        <small class="date-hint">–°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞ –º–∏–Ω—É—Å –æ–¥–∏–Ω –¥–µ–Ω—å</small>
                        <button type="submit" class="btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        <p class="auth-switch">
                            –ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login">–í–æ–π—Ç–∏</a>
                        </p>
                    </form>
                </div>
            </div>

            <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
            <div id="home-module" class="module hidden">
                <div class="home-container">
                    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Coco Instrument</h1>
                    <p class="home-description">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏</p>
                    
                    <div class="tools-grid">
                        <a href="#/coco-money" class="tool-card">
                            <div class="tool-icon">üí∞</div>
                            <h3>Coco Money</h3>
                            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞–º–∏ –∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏</p>
                        </a>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–¥—É–ª—å Coco Money -->
            <div id="coco-money-module" class="module hidden">
                <div class="coco-money-container">
                    <!-- –®–∞–ø–∫–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º -->
                    <div class="balance-header">
                        <h2>Coco Money</h2>
                        <div class="balance-info">
                            <span class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</span>
                            <span id="total-balance" class="balance-amount">0 ‚ÇΩ</span>
                        </div>
                    </div>

                    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –ª–∏—Å—Ç–æ–≤ -->
                    <div id="sheets-grid" class="sheets-grid">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                    </div>

                    <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
                    <div id="empty-state" class="empty-state hidden">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ª–∏—Å—Ç–æ–≤ –¥–æ—Ö–æ–¥–æ–≤</p>
                        <button id="create-first-sheet" class="btn-primary">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ª–∏—Å—Ç</button>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–∏—Å—Ç–∞ (–ø–ª–∞–≤–∞—é—â–∞—è) -->
                    <button id="fab-add-sheet" class="fab" title="–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Å—Ç –¥–æ—Ö–æ–¥–æ–≤">+</button>

                    <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –≤–∏–¥ –ª–∏—Å—Ç–∞ -->
                    <div id="sheet-fullscreen" class="sheet-fullscreen hidden">
                        <div class="sheet-fullscreen-header">
                            <button id="btn-back" class="btn-back">‚Üê</button>
                            <h2 id="fullscreen-sheet-title" class="sheet-fullscreen-title"></h2>
                            <div class="sheet-actions">
                                <button id="export-sheet-btn" class="btn-icon" title="–°–∫–∞—á–∞—Ç—å">‚¨á</button>
                                <button id="edit-sheet-btn" class="btn-icon" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
                            </div>
                        </div>
                        
                        <div class="sheet-fullscreen-content">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Å—Ç–µ -->
                            <div id="sheet-info" class="sheet-info">
                                <div class="sheet-details">
                                    <div class="detail-item">
                                        <span>–î–æ—Ö–æ–¥</span>
                                        <span id="sheet-income">0 ‚ÇΩ</span>
                                    </div>
                                    <div class="detail-item">
                                        <span>–†–∞—Å—Ö–æ–¥—ã</span>
                                        <span id="sheet-expenses">0 ‚ÇΩ</span>
                                    </div>
                                    <div class="detail-item">
                                        <span>–û—Å—Ç–∞—Ç–æ–∫</span>
                                        <span id="sheet-balance">0 ‚ÇΩ</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏—Å—Ç–∞ -->
                            <div id="sheet-edit-form" class="sheet-edit-form hidden">
                                <input type="text" id="edit-sheet-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞">
                                <input type="number" id="edit-sheet-income" placeholder="–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞">
                                <input type="date" id="edit-sheet-date">
                                <div class="form-actions">
                                    <button id="save-sheet-btn" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                    <button id="cancel-edit-btn" class="btn-secondary">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                                    <button id="delete-sheet-btn" class="btn-danger">–£–¥–∞–ª–∏—Ç—å –ª–∏—Å—Ç</button>
                                </div>
                            </div>

                            <!-- –°–µ–∫—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
                            <div id="expenses-section" class="expenses-section">
                                <h4>–†–∞—Å—Ö–æ–¥—ã</h4>
                                
                                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ -->
                                <form id="add-expense-form" class="expense-form">
                                    <input type="number" id="expense-amount" placeholder="–°—É–º–º–∞" required>
                                    <input type="text" id="expense-note" placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ">
                                    <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                                </form>

                                <!-- –°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
                                <div id="expenses-list" class="expenses-list">
                                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤–∞–π–ø–∞ -->
                        <div class="swipe-hint"></div>
                    </div>

                    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ª–∏—Å—Ç–∞ -->
                    <div id="new-sheet-modal" class="modal hidden">
                        <div class="modal-content">
                            <h3>–ù–æ–≤—ã–π –ª–∏—Å—Ç –¥–æ—Ö–æ–¥–æ–≤</h3>
                            <form id="new-sheet-form">
                                <input type="text" id="new-sheet-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
                                <input type="number" id="new-sheet-income" placeholder="–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞" required>
                                <input type="date" id="new-sheet-date" required>
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                                    <button type="button" id="cancel-new-sheet" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
                    <div id="confirm-modal" class="modal hidden">
                        <div class="modal-content">
                            <h3 id="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
                            <p id="confirm-message"></p>
                            <div class="form-actions">
                                <button id="confirm-yes" class="btn-danger">–î–∞</button>
                                <button id="confirm-no" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                            </div>
                        </div>
                    </div>

                    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
                    <div id="export-modal" class="modal hidden">
                        <div class="modal-content">
                            <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                            <div id="export-preview" class="export-preview"></div>
                            <div class="form-actions">
                                <button id="copy-export" class="btn-primary">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                                <button id="download-export" class="btn-primary">–°–∫–∞—á–∞—Ç—å</button>
                                <button id="close-export" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ -->
                    <div id="expense-edit-modal" class="modal hidden">
                        <div class="modal-content">
                            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥</h3>
                            <form id="expense-edit-form">
                                <input type="hidden" id="edit-expense-id">
                                <input type="number" id="edit-expense-amount" placeholder="–°—É–º–º–∞" required>
                                <input type="text" id="edit-expense-note" placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ">
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                    <button type="button" id="cancel-expense-edit" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loader" class="loader hidden">
            <div class="spinner"></div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="toast-container" class="toast-container"></div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="/js/core/EventBus.js"></script>
    <script src="/js/core/StateManager.js"></script>
    <script src="/js/core/APIClient.js"></script>
    <script src="/js/core/Router.js"></script>
    <script src="/js/core/ModuleManager.js"></script>
    <script src="/js/modules/AuthModule.js"></script>
    <script src="/js/modules/HomeModule.js"></script>
    <script src="/js/modules/CocoMoneyModule.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>